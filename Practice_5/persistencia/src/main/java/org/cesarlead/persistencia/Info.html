<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infograf√≠a: Persistencia de Datos en Java | GlobalDesk</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .flowchart-arrow {
            position: relative;
            width: 2px;
            background-color: #94D2BD;
            margin: 0.5rem auto;
        }

        .flowchart-arrow::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid transparent;
            border-right: 6px solid transparent;
            border-top: 8px solid #94D2BD;
        }

        .code-block {
            background-color: #001e26;
            color: #c5d1de;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            font-size: 0.875rem;
            white-space: pre-wrap;
            word-break: break-all;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

<header class="bg-[#005F73] text-white p-6 shadow-lg">
    <div class="container mx-auto text-center">
        <h1 class="text-3xl md:text-4xl font-bold">Persistencia de Datos en Java: De JDBC a Spring Data JPA</h1>
        <p class="text-lg text-[#94D2BD] mt-2">GlobalDesk | Instructor: Ing. C√©sar Fern√°ndez</p>
    </div>
</header>

<main class="container mx-auto p-4 md:p-8">

    <section id="fundamentos" class="mb-12">
        <h2 class="text-3xl font-bold text-[#005F73] text-center mb-6">Parte I: Fundamentos de la Persistencia</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">El Desaf√≠o Objeto-Relacional</h3>
                <p class="mb-4">El n√∫cleo del problema es el "desajuste de impedancia": nuestros objetos Java y las
                    tablas de la base de datos no hablan el mismo idioma.</p>
                <div class="flex justify-around items-center">
                    <div class="text-center">
                        <div class="text-4xl mb-2">üß†</div>
                        <span class="font-semibold">Mundo Java</span>
                        <p class="text-sm">Grafos de Objetos</p>
                    </div>
                    <div class="text-5xl text-[#AE2012] font-mono">‚â†</div>
                    <div class="text-center">
                        <div class="text-4xl mb-2">üíø</div>
                        <span class="font-semibold">Mundo BD</span>
                        <p class="text-sm">Tablas Planas</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">La Soluci√≥n: Traductor ORM</h3>
                <p class="mb-4">Un **Mapeo Objeto-Relacional (ORM)** act√∫a como un traductor autom√°tico, permiti√©ndonos
                    trabajar con objetos Java mientras √©l gestiona el SQL.</p>
                <ul class="space-y-2">
                    <li><span class="font-bold text-[#EE9B00]">JPA:</span> Es el est√°ndar, la especificaci√≥n o "el
                        mapa".
                    </li>
                    <li><span class="font-bold text-[#CA6702]">Hibernate:</span> Es la implementaci√≥n m√°s popular, "el
                        motor".
                    </li>
                </ul>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6 lg:col-span-1">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">JDBC vs JPA: Esfuerzo</h3>
                <p class="text-sm mb-2 text-center">Una comparaci√≥n visual del c√≥digo repetitivo y el esfuerzo de
                    desarrollo requerido.</p>
                <div class="chart-container h-64 md:h-auto">
                    <canvas id="jdbcVsJpaChart"></canvas>
                </div>
            </div>
        </div>
    </section>

    <section id="comparativa" class="mb-12">
        <h2 class="text-3xl font-bold text-[#005F73] text-center mb-6">Comparativa Detallada: JDBC vs. ORM</h2>
        <div class="overflow-x-auto bg-white rounded-lg shadow-md">
            <table class="w-full text-sm text-left text-gray-600">
                <thead class="text-xs text-white uppercase bg-[#0A9396]">
                <tr>
                    <th scope="col" class="px-6 py-3">Caracter√≠stica</th>
                    <th scope="col" class="px-6 py-3">Enfoque con JDBC Crudo</th>
                    <th scope="col" class="px-6 py-3">Enfoque con ORM (Hibernate/JPA)</th>
                </tr>
                </thead>
                <tbody>
                <tr class="border-b bg-white">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Mapeo
                        Objeto-Relacional
                    </th>
                    <td class="px-6 py-4">Manual. El desarrollador escribe el c√≥digo para convertir ResultSet en objetos
                        y viceversa.
                    </td>
                    <td class="px-6 py-4">Autom√°tico. El framework mapea clases a tablas bas√°ndose en anotaciones
                        (@Entity, @Column).
                    </td>
                </tr>
                <tr class="border-b bg-gray-50">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Lenguaje de Consulta
                    </th>
                    <td class="px-6 py-4">SQL nativo. Dependiente del dialecto de la base de datos.</td>
                    <td class="px-6 py-4">JPQL (orientado a objetos) o Criteria API. Independiente de la base de datos.
                        El ORM lo traduce al dialecto SQL correcto.
                    </td>
                </tr>
                <tr class="border-b bg-white">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Portabilidad</th>
                    <td class="px-6 py-4">Baja. El SQL puede necesitar cambios si se cambia de proveedor de base de
                        datos.
                    </td>
                    <td class="px-6 py-4">Alta. El c√≥digo es portable entre bases de datos con cambios m√≠nimos o
                        nulos.
                    </td>
                </tr>
                <tr class="border-b bg-gray-50">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Gesti√≥n de Cach√©</th>
                    <td class="px-6 py-4">Manual. El desarrollador debe implementar su propia estrategia de cach√©.</td>
                    <td class="px-6 py-4">Autom√°tica y configurable. Incluye cach√© de primer y segundo nivel para
                        optimizar el rendimiento.
                    </td>
                </tr>
                <tr class="border-b bg-white">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Gesti√≥n de
                        Concurrencia
                    </th>
                    <td class="px-6 py-4">Manual. Se debe implementar a mano el bloqueo optimista (versiones).</td>
                    <td class="px-6 py-4">Autom√°tica. Soporta bloqueo optimista a trav√©s de la anotaci√≥n @Version.</td>
                </tr>
                <tr class="border-b bg-gray-50">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">C√≥digo Repetitivo</th>
                    <td class="px-6 py-4">Alto. Requiere una enorme cantidad de c√≥digo de "plomer√≠a".</td>
                    <td class="px-6 py-4">Bajo. Elimina casi todo el c√≥digo repetitivo, permitiendo un enfoque en la
                        l√≥gica de negocio.
                    </td>
                </tr>
                <tr class="bg-white">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">Impacto de los
                        Cambios
                    </th>
                    <td class="px-6 py-4">Alto. Un cambio en el esquema de la base de datos (ej: renombrar una columna)
                        rompe el c√≥digo Java.
                    </td>
                    <td class="px-6 py-4">Bajo. Generalmente, solo se necesita modificar la anotaci√≥n en la entidad
                        Java.
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section id="implementacion" class="mb-12">
        <h2 class="text-3xl font-bold text-[#005F73] text-center mb-6">Parte II: Implementaci√≥n con Spring Data JPA</h2>
        <p class="text-center max-w-3xl mx-auto mb-8">Spring Data JPA simplifica dr√°sticamente la implementaci√≥n de la
            capa de persistencia. El proceso se reduce a tres pasos clave, eliminando casi todo el c√≥digo
            repetitivo.</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch">
            <div class="bg-white rounded-lg shadow-md p-6 text-center">
                <div class="bg-[#0A9396] text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-xl">
                    1
                </div>
                <h3 class="text-xl font-bold text-[#0A9396] mb-2">Configurar</h3>
                <p class="text-sm mb-4">Define la conexi√≥n a la base de datos y el comportamiento de Hibernate en
                    `application.properties`.</p>
                <div class="code-block text-left">
                    spring.datasource.url=...
                    spring.jpa.hibernate.ddl-auto=update
                    spring.jpa.show-sql=true
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6 text-center">
                <div class="bg-[#0A9396] text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-xl">
                    2
                </div>
                <h3 class="text-xl font-bold text-[#0A9396] mb-2">Mapear Entidad</h3>
                <p class="text-sm mb-4">Anota una clase Java simple (`POJO`) para decirle a JPA c√≥mo corresponde a una
                    tabla de la base de datos.</p>
                <div class="code-block text-left">
                    @Entity
                    public class Customer {
                    @Id
                    private Long id;
                    private String name;
                    }
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6 text-center">
                <div class="bg-[#0A9396] text-white rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-4 font-bold text-xl">
                    3
                </div>
                <h3 class="text-xl font-bold text-[#0A9396] mb-2">Crear Repositorio</h3>
                <p class="text-sm mb-4">Define una interfaz que extienda de `JpaRepository`. Spring Data crea la
                    implementaci√≥n CRUD completa en tiempo de ejecuci√≥n.</p>
                <div class="code-block text-left">
                    public interface CustomerRepo
                    extends JpaRepository
                    &lt;Customer, Long&gt; {
                    // M√©todos CRUD gratis!
                    }
                </div>
            </div>
        </div>
    </section>

    <section id="consultas" class="mb-12">
        <h2 class="text-3xl font-bold text-[#005F73] text-center mb-6">Parte III: El Arte de la Consulta</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-stretch">
            <div class="bg-white rounded-lg shadow-md p-6 flex flex-col">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">Estrategias de Consulta: Poder vs. Simplicidad</h3>
                <p class="mb-4">Spring Data JPA ofrece un arsenal de estrategias para consultar datos. La elecci√≥n
                    correcta depende de la complejidad del caso de uso. Esta gr√°fica compara la simplicidad de escritura
                    contra la flexibilidad y poder de cada m√©todo.</p>
                <div class="chart-container flex-grow">
                    <canvas id="queryStrategiesChart"></canvas>
                </div>
            </div>
            <div class="flex flex-col justify-between h-full">
                <div class="bg-white rounded-lg shadow-md p-4">
                    <h4 class="font-bold text-[#0A9396]">1. Consultas Derivadas</h4>
                    <p class="text-sm">El framework "deriva" la consulta del nombre del m√©todo. Ideal para b√∫squedas
                        simples. Ej: `findByName(...)`</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-4">
                    <h4 class="font-bold text-[#0A9396]">2. JPQL con @Query</h4>
                    <p class="text-sm">Control total con un lenguaje similar a SQL pero orientado a objetos (portable
                        entre bases de datos). Ej: `@Query("SELECT c FROM Customer c...")`</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-4">
                    <h4 class="font-bold text-[#0A9396]">3. SQL Nativo con @Query</h4>
                    <p class="text-sm">Para usar caracter√≠sticas espec√≠ficas de una base de datos. Se pierde la
                        portabilidad. Ej: `@Query(..., nativeQuery = true)`</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-4">
                    <h4 class="font-bold text-[#0A9396]">4. Especificaciones</h4>
                    <p class="text-sm">La herramienta m√°s poderosa para construir consultas din√°micas y complejas de
                        forma program√°tica, ideal para filtros de b√∫squeda avanzados.</p>
                </div>
            </div>
        </div>

        <div class="mt-12">
            <h3 class="text-2xl font-bold text-[#005F73] text-center mb-6">Palabras Clave para Consultas Derivadas</h3>
            <div class="overflow-x-auto bg-white rounded-lg shadow-md">
                <table class="w-full text-sm text-left text-gray-600">
                    <thead class="text-xs text-white uppercase bg-[#0A9396]">
                    <tr>
                        <th scope="col" class="px-6 py-3">Palabra Clave</th>
                        <th scope="col" class="px-6 py-3">Ejemplo de M√©todo</th>
                        <th scope="col" class="px-6 py-3">Consulta JPQL Generada (Aproximada)</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="border-b bg-white">
                        <td class="px-6 py-4"><code>And</code></td>
                        <td class="px-6 py-4"><code>findByNameAndEmail(String name, String email)</code></td>
                        <td class="px-6 py-4"><code>... WHERE x.name = ?1 AND x.email = ?2</code></td>
                    </tr>
                    <tr class="border-b bg-gray-50">
                        <td class="px-6 py-4"><code>Or</code></td>
                        <td class="px-6 py-4"><code>findByNameOrEmail(String name, String email)</code></td>
                        <td class="px-6 py-4"><code>... WHERE x.name = ?1 OR x.email = ?2</code></td>
                    </tr>
                    <tr class="border-b bg-white">
                        <td class="px-6 py-4"><code>Is, Equals</code></td>
                        <td class="px-6 py-4"><code>findByNameIs(String name)</code></td>
                        <td class="px-6 py-4"><code>... WHERE x.name = ?1</code></td>
                    </tr>
                    <tr class="border-b bg-gray-50">
                        <td class="px-6 py-4"><code>Between</code></td>
                        <td class="px-6 py-4"><code>findByAgeBetween(int start, int end)</code></td>
                        <td class="px-6 py-4"><code>... WHERE x.age BETWEEN ?1 AND ?2</code></td>
                    </tr>
                    <tr class="border-b bg-white">
                        <td class="px-6 py-4"><code>StartingWith</code></td>
                        <td class="px-6 py-4"><code>findByNameStartingWith(String prefix)</code></td>
                        <td class="px-6 py-4"><code>... WHERE x.name LIKE ?1%</code></td>
                    </tr>
                    <tr class="border-b bg-gray-50">
                        <td class="px-6 py-4"><code>Containing</code></td>
                        <td class="px-6 py-4"><code>findByNameContaining(String infix)</code></td>
                        <td class="px-6 py-4"><code>... WHERE x.name LIKE %?1%</code></td>
                    </tr>
                    <tr class="border-b bg-white">
                        <td class="px-6 py-4"><code>OrderBy</code></td>
                        <td class="px-6 py-4"><code>findByNameOrderByIdDesc(String name)</code></td>
                        <td class="px-6 py-4"><code>... WHERE x.name = ?1 ORDER BY x.id DESC</code></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="mt-12">
            <h3 class="text-2xl font-bold text-[#005F73] text-center mb-6">Cu√°ndo Usar Cada Estrategia de Consulta</h3>
            <div class="overflow-x-auto bg-white rounded-lg shadow-md">
                <table class="w-full text-sm text-left text-gray-600">
                    <thead class="text-xs text-white uppercase bg-[#0A9396]">
                    <tr>
                        <th scope="col" class="px-6 py-3">Estrategia</th>
                        <th scope="col" class="px-6 py-3">Complejidad</th>
                        <th scope="col" class="px-6 py-3">Dinamismo</th>
                        <th scope="col" class="px-6 py-3">Mantenibilidad</th>
                        <th scope="col" class="px-6 py-3">Ideal Para...</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="border-b bg-white">
                        <td class="px-6 py-4 font-semibold">Consultas Derivadas</td>
                        <td class="px-6 py-4">Baja</td>
                        <td class="px-6 py-4">Est√°tica</td>
                        <td class="px-6 py-4">Alta (para consultas simples)</td>
                        <td class="px-6 py-4">Operaciones CRUD y b√∫squedas simples y bien definidas (ej. <code>findByEmail</code>).
                        </td>
                    </tr>
                    <tr class="border-b bg-gray-50">
                        <td class="px-6 py-4 font-semibold">@Query (JPQL)</td>
                        <td class="px-6 py-4">Media a Alta</td>
                        <td class="px-6 py-4">Est√°tica</td>
                        <td class="px-6 py-4">Media (consultas centralizadas)</td>
                        <td class="px-6 py-4">Consultas con JOINs, proyecciones o l√≥gica compleja.</td>
                    </tr>
                    <tr class="border-b bg-white">
                        <td class="px-6 py-4 font-semibold">@Query (SQL Nativo)</td>
                        <td class="px-6 py-4">Alta</td>
                        <td class="px-6 py-4">Est√°tica</td>
                        <td class="px-6 py-4">Baja (acoplado a la BD)</td>
                        <td class="px-6 py-4">Usar caracter√≠sticas espec√≠ficas de la base de datos u optimizaciones.
                        </td>
                    </tr>
                    <tr class="bg-gray-50">
                        <td class="px-6 py-4 font-semibold">Especificaciones</td>
                        <td class="px-6 py-4">Alta</td>
                        <td class="px-6 py-4">Din√°mica</td>
                        <td class="px-6 py-4">Compleja (l√≥gica en el servicio)</td>
                        <td class="px-6 py-4">Filtros de b√∫squeda complejos con m√∫ltiples criterios opcionales.</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </section>

    <section id="produccion">
        <h2 class="text-3xl font-bold text-[#005F73] text-center mb-6">Parte IV: Persistencia de Grado de
            Producci√≥n</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">Optimizaci√≥n: El Problema N+1</h3>
                <p class="mb-4">El error de rendimiento m√°s com√∫n en ORM. Sin optimizaci√≥n, para obtener N entidades y
                    sus relaciones, se ejecutan N+1 consultas. Con `JOIN FETCH` o `@EntityGraph`, se reduce a una sola
                    consulta.</p>
                <div class="chart-container">
                    <canvas id="nPlusOneChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">Arquitectura de API: El Patr√≥n DTO</h3>
                <p class="mb-4 text-center text-red-700 font-bold">¬°NUNCA expongas entidades JPA en una API REST!</p>
                <p class="mb-4">Hacerlo crea riesgos de seguridad y acopla tu API a la base de datos. La soluci√≥n es
                    usar Data Transfer Objects (DTOs) para crear un contrato de API estable e independiente.</p>
                <div class="w-full text-center">
                    <div class="p-3 bg-[#94D2BD] text-[#005F73] rounded-lg font-semibold shadow">Controller ‚Üî API</div>
                    <div class="flowchart-arrow h-6"></div>
                    <div class="p-3 bg-[#E9D8A6] rounded-lg font-semibold shadow">DTO (Data Transfer Object)</div>
                    <div class="flowchart-arrow h-6"></div>
                    <div class="p-3 bg-gray-200 rounded-lg font-semibold shadow">Service ‚Üî L√≥gica</div>
                    <div class="flowchart-arrow h-6"></div>
                    <div class="p-3 bg-[#005F73] text-white rounded-lg font-semibold shadow">Entity ‚Üî Base de Datos
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">Integridad con @Transactional</h3>
                <p>Garantiza que una serie de operaciones sean **at√≥micas**: o todas tienen √©xito (COMMIT) o, si una
                    falla, todas se revierten (ROLLBACK). Esto mantiene la consistencia de los datos.</p>
            </div>

            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-xl font-bold text-[#0A9396] mb-4">Modelando Relaciones</h3>
                <p>Usa anotaciones como `@OneToMany` y `@ManyToOne` para definir las relaciones entre entidades. La
                    clave para el rendimiento es usar siempre `fetch = FetchType.LAZY` por defecto.</p>
            </div>
        </div>
    </section>

</main>

<footer class="text-center p-6 bg-gray-200 mt-8">
    <p class="text-sm text-gray-600">Resumen de los conceptos clave sobre persistencia de datos en Java con
        JPA y Spring.</p>
    <p class="font-bold text-[#005F73] mt-1">GlobalDesk | Ing. C√©sar Fern√°ndez</p>
</footer>

<script>
    const tooltipTitleCallback = (tooltipItems) => {
        const item = tooltipItems[0];
        let label = item.chart.data.labels[item.dataIndex];
        if (Array.isArray(label)) {
            return label.join(' ');
        }
        return label;
    };

    const wrapLabel = (label, maxWidth = 16) => {
        if (label.length <= maxWidth) {
            return label;
        }
        const words = label.split(' ');
        const lines = [];
        let currentLine = '';
        for (const word of words) {
            if ((currentLine + ' ' + word).trim().length > maxWidth) {
                lines.push(currentLine.trim());
                currentLine = word;
            } else {
                currentLine = (currentLine + ' ' + word).trim();
            }
        }
        if (currentLine) {
            lines.push(currentLine.trim());
        }
        return lines;
    };

    const sharedChartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                labels: {
                    color: '#374151'
                }
            },
            tooltip: {
                callbacks: {
                    title: tooltipTitleCallback
                }
            }
        },
        scales: {
            x: {
                ticks: {color: '#374151'},
                grid: {display: false}
            },
            y: {
                ticks: {color: '#374151'},
                grid: {color: '#e5e7eb'}
            }
        }
    };

    const jdbcVsJpaCtx = document.getElementById('jdbcVsJpaChart').getContext('2d');
    new Chart(jdbcVsJpaCtx, {
        type: 'doughnut',
        data: {
            labels: ['Esfuerzo con JDBC', 'Esfuerzo con JPA/ORM'],
            datasets: [{
                label: 'Esfuerzo de Desarrollo',
                data: [85, 15],
                backgroundColor: ['#BB3E03', '#0A9396'],
                borderColor: '#ffffff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'top',
                    labels: {color: '#374151'}
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                }
            }
        }
    });

    const queryStrategiesCtx = document.getElementById('queryStrategiesChart').getContext('2d');
    new Chart(queryStrategiesCtx, {
        type: 'bar',
        data: {
            labels: [
                wrapLabel('Consultas Derivadas'),
                'JPQL con @Query',
                'SQL Nativo',
                'Especificaciones'
            ].map(l => Array.isArray(l) ? l : wrapLabel(l)),
            datasets: [{
                label: 'Simplicidad',
                data: [90, 65, 60, 30],
                backgroundColor: '#0A9396',
            }, {
                label: 'Poder/Flexibilidad',
                data: [20, 75, 80, 95],
                backgroundColor: '#EE9B00',
            }]
        },
        options: {
            ...sharedChartOptions,
            indexAxis: 'y',
            scales: {
                x: {
                    stacked: true,
                    max: 115,
                    ticks: {display: false},
                    grid: {display: false}
                },
                y: {
                    stacked: true,
                    ticks: {color: '#374151'},
                    grid: {display: false}
                }
            },
        }
    });

    const nPlusOneCtx = document.getElementById('nPlusOneChart').getContext('2d');
    const nPlusOneLabels = ['1', '10', '50', '100'];
    new Chart(nPlusOneCtx, {
        type: 'line',
        data: {
            labels: nPlusOneLabels.map(l => `${l} Clientes`),
            datasets: [{
                label: 'Consultas con N+1',
                data: nPlusOneLabels.map(n => parseInt(n) + 1),
                borderColor: '#AE2012',
                backgroundColor: 'rgba(174, 32, 18, 0.2)',
                tension: 0.1,
                fill: true
            }, {
                label: 'Consultas con JOIN FETCH',
                data: nPlusOneLabels.map(() => 1),
                borderColor: '#0A9396',
                backgroundColor: 'rgba(10, 147, 150, 0.2)',
                tension: 0.1,
                fill: true
            }]
        },
        options: {
            ...sharedChartOptions,
            scales: {
                x: {
                    title: {display: true, text: 'N√∫mero de Entidades Ra√≠z'}
                },
                y: {
                    beginAtZero: true,
                    title: {display: true, text: 'Total de Consultas SQL Ejecutadas'}
                }
            }
        }
    });
</script>
</body>
</html>

